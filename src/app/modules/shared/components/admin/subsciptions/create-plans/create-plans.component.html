<!-- Plan Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">

    <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-2xl relative">
        <!-- Close Button -->
        <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl"
            (click)="closeModalEvent.emit('close modal button clicked')">
            &times;
        </button>

        <!-- Modal Heading -->
        <h2 class="text-xl font-semibold mb-6">Create New Plan</h2>

        <!-- Plan Form -->
        <form [formGroup]="planForm" (submit)="submitPlan()">

            <!-- Name -->
            <div class="mb-4">
                <label class="block font-medium mb-1">Plan Name</label>
                <input formControlName="name" type="text" name="name"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
            </div>

            <!-- Price -->
            <div class="mb-4">
                <label class="block font-medium mb-1">Price</label>
                <input formControlName="price" type="number" name="price"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
            </div>

            <!-- Role -->
            <div class="mb-4">
                <label class="block font-medium mb-1">Role</label>
                <select formControlName="role" name="role"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="" disabled>Select a role</option>
                    <option *ngFor="let role of planRoles" [value]="role">{{ role }}</option>
                </select>
            </div>

            <!-- Duration -->
            <div class="mb-4">
                <label class="block font-medium mb-1">Duration</label>
                <select formControlName="duration" name="duration"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="" disabled>Select duration</option>
                    <option *ngFor="let duration of planDurations" [value]="duration">{{ duration }}</option>
                </select>
            </div>

            <!-- Features -->
            <div class="mb-4">
                <label class="block font-medium mb-2">Features</label>
                <div *ngFor="let control of features.controls; let i = index" class="flex items-center gap-2 mb-2">
                    <input [formControl]="control" class="flex-1 border border-gray-300 rounded-md px-3 py-2"
                        [placeholder]="'Enter feature ' + (i + 1)" />
                    <button type="button" (click)="removeFeature(i)" class="text-red-500 text-sm">Remove</button>
                </div>
                <button type="button" (click)="addFeature()" class="text-blue-500 text-sm hover:underline">+ Add
                    Feature</button>
            </div>


            <!-- Submit Button -->
            <div class="mt-6 text-right">
                <button type="submit"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg transition cursor-pointer">
                    Save Plan
                </button>
            </div>

        </form>
    </div>
</div>