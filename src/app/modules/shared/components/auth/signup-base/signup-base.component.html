<div class="signup-container" [ngClass]="config.type + '-theme py-8'">

    <!-- Background image with overlay -->
    <div class="absolute inset-0 z-0">
        <img [src]="config.backgroundImage" class="w-full h-full object-cover opacity-20" alt="background" />
    </div>

    <div class="container mx-auto px-4 flex flex-col md:flex-row items-center justify-center gap-20 relative z-10">
        <!-- Left side content -->
        <div class="md:w-1/2 text-center md:text-left mb-8 md:mb-0">
            <h1 class="text-4xl font-bold title-text mb-4 font-poppins">
                {{config.title}}
            </h1>
            <h2 class="text-3xl font-bold title-text mb-4 font-poppins">
                {{config.subtitle}}
            </h2>
            <p class="text-lg description-text mb-8 font-inter">
                {{config.description}}
            </p>

            <!-- Feature grid -->
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto md:mx-0">
                <div *ngFor="let feature of config.features"
                    class="bg-white/80 p-6 rounded-lg shadow-sm backdrop-blur-sm feature-card">
                    <i [class]="feature.icon" class="text-3xl feature-icon mb-1"></i>
                    <h3 class="text-lg font-semibold feature-title mb-2 font-poppins">
                        {{feature.title}}
                    </h3>
                    <p class="text-sm feature-description font-inter">
                        {{feature.description}}
                    </p>
                </div>
            </div>
        </div>

        <!-- Right side signup form -->
        <div class="md:w-1/2 max-w-md w-full">
            <div class="bg-white/95 backdrop-blur-lg p-10 rounded-2xl shadow-xl border border-gray-100">

                <!-- Logo / Title -->
                <div class="flex items-center justify-center mb-8 group cursor-pointer">
                    <svg width="32" height="26" viewBox="0 0 28 22" fill="none" xmlns="http://www.w3.org/2000/svg"
                        class="transition-transform group-hover:rotate-12">
                        <path
                            d="M13.7549 5.98438C13.8486 5.89062 13.9893 5.84375 14.1299 5.84375C14.2236 5.84375 14.3643 5.89062 14.458 5.98438L23.1299 13.0625V20.75C23.1299 21.1719 22.7549 21.5 22.3799 21.5H17.083C16.708 21.5 16.333 21.1719 16.333 20.75V16.25C16.333 15.875 16.0049 15.5 15.583 15.5H12.583C12.208 15.5 11.833 15.875 11.833 16.25V20.75C11.833 21.1719 11.5049 21.5 11.1299 21.5H5.87988C5.45801 21.5 5.12988 21.1719 5.12988 20.75V13.1094L13.7549 5.98438ZM27.3955 10.8125C27.5361 10.9062 27.6299 11.0938 27.6299 11.2344C27.6299 11.375 27.583 11.5156 27.4893 11.6094L26.2705 13.0625C26.1768 13.2031 26.0361 13.25 25.8486 13.25C25.708 13.25 25.5674 13.2031 25.4736 13.1094L14.458 4.0625C14.3643 3.96875 14.2236 3.92188 14.1299 3.92188C13.9893 3.92188 13.8486 3.96875 13.7549 4.0625L2.73926 13.1094C2.64551 13.2031 2.50488 13.25 2.36426 13.25C2.17676 13.25 2.03613 13.2031 1.94238 13.0625L0.723633 11.6094C0.676758 11.5156 0.583008 11.375 0.583008 11.2344C0.583008 11.0938 0.676758 10.9062 0.817383 10.8125L12.6768 1.01562C13.0518 0.734375 13.5674 0.546875 14.1299 0.546875C14.6455 0.546875 15.1611 0.734375 15.5361 1.01562L19.7549 4.48438V1.10938C19.7549 0.78125 19.9893 0.546875 20.3174 0.546875H22.9424C23.2236 0.546875 23.5049 0.78125 23.5049 1.10938V7.57812L27.3955 10.8125Z"
                            [ngClass]="{
                                'fill-blue-600 group-hover:fill-blue-700': config.type === 'customer',
                                'fill-green-600 group-hover:fill-green-700': config.type === 'provider'
                                }" class="transition-colors" />
                    </svg>
                    <span class="ml-2 text-3xl font-extrabold bg-gradient-to-r bg-clip-text text-transparent" [ngClass]="{
                            'from-blue-600 to-blue-400': config.type === 'customer',
                            'from-green-600 to-green-400': config.type === 'provider',
                        }">HomeServe</span>
                </div>

                <!-- Form -->
                <form [formGroup]="form" (ngSubmit)="submitForm()" class="space-y-5">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                        <input formControlName="email" type="email" id="email" placeholder="Enter your email" required
                            class="block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition outline-none" />
                    </div>
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                        <input formControlName="username" type="text" id="username" placeholder="Enter your username"
                            required
                            class="block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition outline-none" />
                    </div>
                    <div class="relative">
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>

                        <input [type]="showPassword ? 'text' : 'password'" formControlName="password" id="password"
                            placeholder="Enter your password" required
                            class="block w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition outline-none" />

                        <!-- Toggle Button -->
                        <button type="button" (click)="togglePassword()"
                            class="absolute right-3 top-9 flex items-center  text-gray-500 hover:text-gray-700 focus:outline-none">
                            <i *ngIf="!showPassword" class="fas fa-eye"></i>
                            <i *ngIf="showPassword" class="fas fa-eye-slash"></i>
                        </button>
                    </div>

                    <button type="submit"
                        class="w-full py-3 px-4 rounded-lg bg-gradient-to-r  text-white font-mediun focus:ring-2 focus:ring-offset-2 transition"
                        [ngClass]="{
                            'from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 focus:ring-blue-500': config.type === 'customer',
                            'from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 focus:ring-green-500': config.type === 'provider'
                            }">
                        Sign Up
                    </button>
                </form>

                <!-- Divider -->
                <div class="mt-8" *ngIf="config.socialAuth?.google || config.socialAuth?.facebook">
                    <div class="relative flex items-center">
                        <div class="w-full border-t border-gray-300"></div>
                        <span class="absolute left-1/2 -translate-x-1/2 bg-white px-3 text-gray-500 text-sm">Or continue
                            with</span>
                    </div>

                    <!-- Social buttons -->
                    <div class="mt-6 space-y-3">
                        <button *ngIf="config.socialAuth?.google"
                            class="w-full flex justify-center items-center gap-3 py-2 px-4 border border-gray-200 rounded-lg shadow-sm bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 48 48">
                                <path fill="#fbc02d"
                                    d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12	s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20	s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z">
                                </path>
                                <path fill="#e53935"
                                    d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039	l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z">
                                </path>
                                <path fill="#4caf50"
                                    d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z">
                                </path>
                                <path fill="#1565c0"
                                    d="M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z">
                                </path>
                            </svg>
                            <span>Sign up with Google</span>
                        </button>

                        <button *ngIf="config.socialAuth?.facebook"
                            class="w-full flex justify-center items-center gap-2 py-2 px-4 border border-gray-200 rounded-lg shadow-sm bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md transition">
                            <img src="assets/images/facebook-icon.png" alt="Facebook" class="w-5 h-5" />
                            <span>Sign up with Facebook</span>
                        </button>
                    </div>
                </div>

                <!-- Footer -->
                <div class="mt-8 text-center text-sm text-gray-600">
                    Already have an account?
                    <a [routerLink]="config.type === 'customer' ? '/login' : '/provider/login'"
                        class="ml-1 font-medium  transition hover:underline" [ngClass]="{
                            'text-blue-600 hover:text-blue-700': config.type === 'customer',
                            'text-green-600 hover:text-green-700': config.type === 'provider'
                        }">Log In</a>
                </div>
            </div>
        </div>

    </div>

    <!-- Trust indicators at the bottom -->
    <div class="absolute bottom-4 left-0 right-0 flex justify-center space-x-8 text-sm text-gray-600">
        <div class="flex items-center">
            <i class="fas fa-check-circle text-indigo-500 mr-2"></i>
            <span>Trusted by 10,000+ customers</span>
        </div>
        <div class="flex items-center">
            <i class="fas fa-lock text-indigo-500 mr-2"></i>
            <span>Secure & encrypted</span>
        </div>
        <div class="flex items-center">
            <i class="fas fa-headset text-indigo-500 mr-2"></i>
            <span>24/7 customer support</span>
        </div>
    </div>
</div>

<ng-container *ngIf="otpModal()">
    <app-otp (code)="verifyOtp($event)" (resendOTP)="resendOtp()" (closeModalEvent)="closeModal()" [email]="user.email"
        [userType]="config.type"></app-otp>
</ng-container>