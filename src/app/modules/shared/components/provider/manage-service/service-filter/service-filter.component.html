<div class="bg-white border border-gray-100 rounded-2xl shadow-sm overflow-hidden transition-all duration-300">
    <!-- Header with Search and Toggle -->
    <div class="p-4 md:p-6 bg-white flex flex-col sm:flex-row items-center gap-4">
        <!-- Search Bar (Always visible) -->
        <div class="relative flex-grow w-full">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <i class="fas fa-search text-gray-400"></i>
            </div>
            <input id="search" type="text" [(ngModel)]="searchText" (ngModelChange)="onSearchChange()"
                placeholder="Search by service name, profession or description..."
                class="w-full pl-11 pr-4 py-3 rounded-xl border border-gray-100 bg-gray-50/50 
                       focus:ring-4 focus:ring-green-500/10 focus:border-green-500 outline-none transition-all duration-200 text-sm" />
        </div>

        <div class="flex items-center gap-3 w-full sm:w-auto">
            <!-- Filter Toggle -->
            <button (click)="showFilters = !showFilters"
                class="flex-grow sm:flex-none flex items-center justify-center gap-2 px-6 py-3 rounded-xl border-2 transition-all duration-200 font-semibold text-sm"
                [ngClass]="showFilters 
                ? 'bg-green-50 border-green-200 text-green-700 shadow-sm shadow-green-100' 
                : 'bg-white border-gray-100 text-gray-600 hover:border-gray-200 hover:bg-gray-50'">
                <i class="fas fa-sliders-h"></i>
                <span>Filters</span>
                <i class="fas fa-chevron-down text-[10px] transition-transform duration-300"
                    [class.rotate-180]="showFilters"></i>
            </button>

            <!-- Reset Button (Visible if anything is changed) -->
            <button *ngIf="searchText || selectedServiceStatus !== 'all' || selectedSortOption !== 'latest'"
                (click)="resetServiceFilters()"
                class="p-3 rounded-xl text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all duration-200"
                title="Reset all filters">
                <i class="fas fa-redo-alt"></i>
            </button>
        </div>
    </div>

    <!-- Collapsible Advanced Filters -->
    <div *ngIf="showFilters"
        class="px-6 pb-6 pt-2 border-t border-gray-50 bg-white grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-top-4 duration-300">

        <!-- Service Status -->
        <div class="space-y-2">
            <label for="status"
                class="text-[12px] font-bold uppercase tracking-wider text-gray-400 flex items-center gap-2">
                <i class="fas fa-toggle-on text-xs text-green-500"></i>
                Visibility Status
            </label>
            <div class="relative">
                <select id="status" [(ngModel)]="selectedServiceStatus" (ngModelChange)="onStatusChange()"
                    class="w-full appearance-none px-4 py-2.5 rounded-xl border border-gray-100 bg-gray-50/50 
                           focus:ring-4 focus:ring-green-500/10 focus:border-green-500 outline-none transition-all text-sm cursor-pointer">
                    <option *ngFor="let option of serviceStatusOptions" [value]="option.value">{{option.label}}</option>
                </select>
                <i
                    class="fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-gray-300 text-[10px] pointer-events-none"></i>
            </div>
        </div>


        <!-- Sort By -->
        <div class="space-y-2">
            <label for="sortBy"
                class="text-[12px] font-bold uppercase tracking-wider text-gray-400 flex items-center gap-2">
                <i class="fas fa-sort-amount-down text-xs text-amber-500"></i>
                Order By
            </label>
            <div class="relative">
                <select id="sortBy" [(ngModel)]="selectedSortOption" (ngModelChange)="onSortChange()"
                    class="w-full appearance-none px-4 py-2.5 rounded-xl border border-gray-100 bg-gray-50/50 
                           focus:ring-4 focus:ring-green-500/10 focus:border-green-500 outline-none transition-all text-sm cursor-pointer">
                    <option *ngFor="let option of SortEnumOptions" [value]="option.value">{{option.label}}</option>
                </select>
                <i
                    class="fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-gray-300 text-[10px] pointer-events-none"></i>
            </div>
        </div>
    </div>
</div>