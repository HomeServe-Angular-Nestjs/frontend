<div class="notification-container">
    <header class="notification-header">
        <div class="header-content">
            <h1>Notifications</h1>
            <p>Stay updated with your latest activities and system alerts</p>
        </div>
        <div class="header-actions">
            <button class="btn-outline" (click)="markAllAsRead()" [disabled]="notifications().length === 0">
                <i class="fas fa-check-double"></i> Mark all as read
            </button>
            <button class="btn-danger-outline" (click)="clearAll()" [disabled]="notifications().length === 0">
                <i class="fas fa-trash-alt"></i> Clear all
            </button>
        </div>
    </header>

    <div class="notification-filters">
        <button [class.active]="activeFilter() === 'all'" (click)="setFilter('all')">
            All <span>{{ notifications().length }}</span>
        </button>
        <button [class.active]="activeFilter() === NotificationType.SYSTEM"
            (click)="setFilter(NotificationType.SYSTEM)">
            System <span>{{ getUnreadCount(NotificationType.SYSTEM) }}</span>
        </button>
        <button [class.active]="activeFilter() === NotificationType.EVENT" (click)="setFilter(NotificationType.EVENT)">
            Events <span>{{ getUnreadCount(NotificationType.EVENT) }}</span>
        </button>
        <!-- <button [class.active]="activeFilter() === NotificationType.REMINDER"
            (click)="setFilter(NotificationType.REMINDER)">
            Reminders <span>{{ getUnreadCount(NotificationType.REMINDER) }}</span>
        </button> -->
        <!-- <button [class.active]="activeFilter() === NotificationType.CUSTOM"
            (click)="setFilter(NotificationType.CUSTOM)">
            Other <span>{{ getUnreadCount(NotificationType.CUSTOM) }}</span>
        </button> -->
    </div>

    <div class="notification-list" [class.loading]="loading()">
        @if (loading()) {
        <div class="loading-state">
            <div class="spinner"></div>
            <p>Fetching notifications...</p>
        </div>
        } @else if (filteredNotifications.length > 0) {
        @for (notification of filteredNotifications; track notification.id) {
        <div class="notification-item" [class.unread]="!notification.isRead"
            (click)="handleNotificationClick(notification)">
            <div class="notification-icon" [ngClass]="notification.type">
                @switch (notification.type) {
                @case (NotificationType.SYSTEM) { <i class="fas fa-cog"></i> }
                @case (NotificationType.EVENT) { <i class="fas fa-calendar-alt"></i> }
                @case (NotificationType.REMINDER) { <i class="fas fa-clock"></i> }
                @default { <i class="fas fa-bell"></i> }
                }
            </div>
            <div class="notification-content">
                <div class="notification-meta">
                    <span class="type-badge">{{ notification.type }}</span>
                    <span class="time">{{ notification.createdAt | date:'short' }}</span>
                </div>
                <h3 class="notification-title">{{ notification.title }}</h3>
                <p class="notification-message">{{ notification.message }}</p>
                <div class="notification-item-actions">
                    @if (!notification.isRead) {
                    <button class="btn-text" (click)="markAsRead(notification.id)">
                        Mark as read
                    </button>
                    }
                    <button class="btn-text-danger" (click)="deleteNotification(notification.id)">
                        Delete
                    </button>
                </div>
            </div>
            <div class="unread-dot" *ngIf="!notification.isRead"></div>
        </div>
        }
        } @else {
        <div class="empty-state">
            <div class="empty-icon">
                <i class="fas fa-bell-slash"></i>
            </div>
            <h3>No notifications found</h3>
            <p>When you receive alerts or updates, they will appear here.</p>
        </div>
        }
    </div>
</div>